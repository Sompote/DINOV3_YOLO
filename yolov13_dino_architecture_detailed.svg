<?xml version="1.0" encoding="UTF-8"?>
<svg width="1800" height="1400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradients -->
    <linearGradient id="inputGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#e3f2fd;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#bbdefb;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="backboneGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f3e5f5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e1bee7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dinoGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#fff8e1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffecb3;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="headGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#e8f5e8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c8e6c8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="p6Grad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#fce4ec;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f8bbd9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="p9Grad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f3e5f5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ce93d8;stop-opacity:1" />
    </linearGradient>
    
    <!-- Arrows -->
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#424242"/>
    </marker>
    <marker id="dinoArrow" markerWidth="12" markerHeight="8" refX="11" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#ff8f00"/>
    </marker>
    <marker id="enhanceArrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1800" height="1400" fill="#fafafa"/>
  
  <!-- Title -->
  <text x="900" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#1a237e">
    YOLOv13 + DINOv3 Multi-Scale Architecture
  </text>
  <text x="900" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="#3f51b5">
    Complete Feature Pyramid with P3/P4/P5 Enhancement Options + Theoretical P6/P9 Extensions
  </text>
  
  <!-- Input Section -->
  <rect x="50" y="80" width="150" height="70" rx="5" fill="url(#inputGrad)" stroke="#1565c0" stroke-width="2"/>
  <text x="125" y="105" text-anchor="middle" font-size="14" font-weight="bold" fill="#0d47a1">Input Image</text>
  <text x="125" y="125" text-anchor="middle" font-size="12" fill="#1565c0">3×640×640</text>
  <text x="125" y="140" text-anchor="middle" font-size="10" fill="#1565c0">RGB Format</text>
  
  <!-- YOLOv13 Backbone Section -->
  <rect x="50" y="170" width="1400" height="400" rx="8" fill="url(#backboneGrad)" stroke="#6a1b9a" stroke-width="3"/>
  <text x="750" y="200" text-anchor="middle" font-size="20" font-weight="bold" fill="#4a148c">YOLOv13 Backbone - Feature Pyramid Network</text>
  
  <!-- Feature Pyramid Levels -->
  
  <!-- P1/P2 Layers -->
  <g id="early-layers">
    <rect x="80" y="220" width="120" height="50" rx="4" fill="#e8eaf6" stroke="#3f51b5" stroke-width="1"/>
    <text x="140" y="240" text-anchor="middle" font-size="11" font-weight="bold" fill="#1a237e">P1/P2 Layers</text>
    <text x="140" y="255" text-anchor="middle" font-size="10" fill="#1a237e">Conv + Bottleneck</text>
    <text x="140" y="265" text-anchor="middle" font-size="9" fill="#3f51b5">640×640→160×160</text>
  </g>
  
  <!-- P3 Level -->
  <g id="p3-level">
    <rect x="220" y="220" width="140" height="80" rx="5" fill="#fff3e0" stroke="#ff8f00" stroke-width="2"/>
    <text x="290" y="245" text-anchor="middle" font-size="12" font-weight="bold" fill="#e65100">P3 Level (1/8)</text>
    <text x="290" y="260" text-anchor="middle" font-size="11" fill="#e65100">80×80×256</text>
    <text x="290" y="275" text-anchor="middle" font-size="10" fill="#ff8f00">Small Objects</text>
    <text x="290" y="290" text-anchor="middle" font-size="9" fill="#ff8f00">8×Bottleneck(256)</text>
    
    <!-- DINO3 Enhancement Option -->
    <rect x="230" y="305" width="120" height="25" rx="3" fill="#ffecb3" stroke="#ffa000" stroke-width="1"/>
    <text x="290" y="320" text-anchor="middle" font-size="9" font-weight="bold" fill="#e65100">DINO3 Option</text>
    
    <circle cx="290" cy="340" r="8" fill="#ff8f00" stroke="#e65100" stroke-width="2"/>
    <text x="305" y="345" font-size="8" fill="#e65100">P3 Extract</text>
  </g>
  
  <!-- P4 Level - Primary DINO Integration -->
  <g id="p4-level">
    <rect x="380" y="220" width="160" height="80" rx="5" fill="#ffecb3" stroke="#ffa000" stroke-width="3"/>
    <text x="460" y="245" text-anchor="middle" font-size="12" font-weight="bold" fill="#e65100">P4 Level (1/16) ⭐</text>
    <text x="460" y="260" text-anchor="middle" font-size="11" fill="#e65100">40×40×512</text>
    <text x="460" y="275" text-anchor="middle" font-size="10" fill="#ff8f00">Medium Objects</text>
    <text x="460" y="290" text-anchor="middle" font-size="9" fill="#ff8f00">Primary DINO3 Enhanced</text>
    
    <!-- DINO3 Integration -->
    <rect x="390" y="305" width="140" height="25" rx="3" fill="#ffa000" stroke="#e65100" stroke-width="2"/>
    <text x="460" y="320" text-anchor="middle" font-size="9" font-weight="bold" fill="white">DINO3 Enhanced</text>
    
    <circle cx="460" cy="340" r="10" fill="#ffa000" stroke="#e65100" stroke-width="2"/>
    <text x="480" y="345" font-size="8" fill="#e65100">P4 Enhanced</text>
  </g>
  
  <!-- P5 Level -->
  <g id="p5-level">
    <rect x="560" y="220" width="140" height="80" rx="5" fill="#fff3e0" stroke="#ff8f00" stroke-width="2"/>
    <text x="630" y="245" text-anchor="middle" font-size="12" font-weight="bold" fill="#e65100">P5 Level (1/32)</text>
    <text x="630" y="260" text-anchor="middle" font-size="11" fill="#e65100">20×20×1024</text>
    <text x="630" y="275" text-anchor="middle" font-size="10" fill="#ff8f00">Large Objects</text>
    <text x="630" y="290" text-anchor="middle" font-size="9" fill="#ff8f00">4×Bottleneck(1024)</text>
    
    <!-- DINO3 Enhancement Option -->
    <rect x="570" y="305" width="120" height="25" rx="3" fill="#ffecb3" stroke="#ffa000" stroke-width="1"/>
    <text x="630" y="320" text-anchor="middle" font-size="9" font-weight="bold" fill="#e65100">DINO3 Option</text>
    
    <circle cx="630" cy="340" r="8" fill="#ff8f00" stroke="#e65100" stroke-width="2"/>
    <text x="645" y="345" font-size="8" fill="#e65100">P5 Extract</text>
  </g>
  
  <!-- Theoretical P6 Level -->
  <g id="p6-level">
    <rect x="720" y="220" width="140" height="80" rx="5" fill="url(#p6Grad)" stroke="#c2185b" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="790" y="245" text-anchor="middle" font-size="12" font-weight="bold" fill="#880e4f">P6 Level (1/64)</text>
    <text x="790" y="260" text-anchor="middle" font-size="11" fill="#880e4f">10×10×1536</text>
    <text x="790" y="275" text-anchor="middle" font-size="10" fill="#c2185b">Extra Large Objects</text>
    <text x="790" y="290" text-anchor="middle" font-size="9" fill="#c2185b">Theoretical Extension</text>
    
    <!-- DINO3 Enhancement -->
    <rect x="730" y="305" width="120" height="25" rx="3" fill="#f8bbd9" stroke="#c2185b" stroke-width="1"/>
    <text x="790" y="320" text-anchor="middle" font-size="9" font-weight="bold" fill="#880e4f">DINO3 Optimal</text>
    
    <circle cx="790" cy="340" r="8" fill="#c2185b" stroke="#880e4f" stroke-width="2"/>
    <text x="805" y="345" font-size="8" fill="#880e4f">P6 Context</text>
  </g>
  
  <!-- Theoretical P9 Level -->
  <g id="p9-level">
    <rect x="880" y="220" width="140" height="80" rx="5" fill="url(#p9Grad)" stroke="#7b1fa2" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="950" y="245" text-anchor="middle" font-size="12" font-weight="bold" fill="#4a148c">P9 Level (1/512)</text>
    <text x="950" y="260" text-anchor="middle" font-size="11" fill="#4a148c">1×1×2048</text>
    <text x="950" y="275" text-anchor="middle" font-size="10" fill="#7b1fa2">Global Context</text>
    <text x="950" y="290" text-anchor="middle" font-size="9" fill="#7b1fa2">Scene Understanding</text>
    
    <!-- DINO3 Enhancement -->
    <rect x="890" y="305" width="120" height="25" rx="3" fill="#ce93d8" stroke="#7b1fa2" stroke-width="1"/>
    <text x="950" y="320" text-anchor="middle" font-size="9" font-weight="bold" fill="#4a148c">DINO3 Global</text>
    
    <circle cx="950" cy="340" r="8" fill="#7b1fa2" stroke="#4a148c" stroke-width="2"/>
    <text x="965" y="345" font-size="8" fill="#4a148c">P9 Global</text>
  </g>
  
  <!-- Feature Flow Indicators -->
  <g id="feature-flow">
    <text x="80" y="380" font-size="11" font-weight="bold" fill="#6a1b9a">Feature Flow:</text>
    <text x="80" y="400" font-size="10" fill="#6a1b9a">Spatial: 640² → 320² → 160² → 80² → 40² → 20² → 10² → 1²</text>
    <text x="80" y="415" font-size="10" fill="#6a1b9a">Channels: 3 → 64 → 128 → 256 → 512 → 1024 → 1536 → 2048</text>
    <text x="80" y="430" font-size="10" fill="#6a1b9a">DINO Integration: P3(Optional) → P4(Primary) → P5(Optional) → P6(Theoretical) → P9(Global)</text>
    
    <text x="80" y="455" font-size="11" font-weight="bold" fill="#6a1b9a">Enhancement Strategy:</text>
    <text x="80" y="475" font-size="10" fill="#ff8f00">⭐ P4: Optimal balance (40×40×512) - Primary integration point</text>
    <text x="80" y="490" font-size="10" fill="#ff8f00">• P3: Small objects (80×80×256) - High resolution details</text>
    <text x="80" y="505" font-size="10" fill="#ff8f00">• P5: Large objects (20×20×1024) - Contextual features</text>
    <text x="80" y="520" font-size="10" fill="#c2185b">• P6: Extra-large objects (10×10×1536) - Global context</text>
    <text x="80" y="535" font-size="10" fill="#7b1fa2">• P9: Scene understanding (1×1×2048) - Maximum context</text>
  </g>
  
  <!-- DINO3 Vision Transformer Section -->
  <rect x="1480" y="170" width="300" height="400" rx="8" fill="url(#dinoGrad)" stroke="#ef6c00" stroke-width="3"/>
  <text x="1630" y="200" text-anchor="middle" font-size="18" font-weight="bold" fill="#bf360c">DINOv3 Vision Transformer</text>
  
  <!-- DINO3 Architecture Detail -->
  <g id="dino3-architecture">
    <text x="1630" y="225" text-anchor="middle" font-size="14" font-weight="bold" fill="#d84315">facebook/dinov3-base</text>
    
    <!-- Input Processing -->
    <rect x="1500" y="245" width="90" height="35" rx="3" fill="#fff8e1" stroke="#ff8f00" stroke-width="1"/>
    <text x="1545" y="260" text-anchor="middle" font-size="10" fill="#e65100">Input Projection</text>
    <text x="1545" y="275" text-anchor="middle" font-size="9" fill="#e65100">512ch → 3ch RGB</text>
    
    <rect x="1600" y="245" width="90" height="35" rx="3" fill="#fff8e1" stroke="#ff8f00" stroke-width="1"/>
    <text x="1645" y="260" text-anchor="middle" font-size="10" fill="#e65100">Resize</text>
    <text x="1645" y="275" text-anchor="middle" font-size="9" fill="#e65100">→224×224</text>
    
    <!-- Patch Embedding -->
    <rect x="1500" y="290" width="120" height="40" rx="3" fill="#fff8e1" stroke="#ff8f00" stroke-width="1"/>
    <text x="1560" y="308" text-anchor="middle" font-size="10" fill="#e65100">Patch Embedding</text>
    <text x="1560" y="320" text-anchor="middle" font-size="9" fill="#e65100">16×16 patches</text>
    <text x="1560" y="327" text-anchor="middle" font-size="8" fill="#e65100">196 patches total</text>
    
    <!-- Transformer Core -->
    <rect x="1630" y="290" width="140" height="60" rx="5" fill="#ffecb3" stroke="#ffa000" stroke-width="3"/>
    <text x="1700" y="315" text-anchor="middle" font-size="11" font-weight="bold" fill="#e65100">12 Transformer</text>
    <text x="1700" y="328" text-anchor="middle" font-size="11" font-weight="bold" fill="#e65100">Layers</text>
    <text x="1700" y="340" text-anchor="middle" font-size="9" fill="#e65100">768-dim embeddings</text>
    <text x="1700" y="347" text-anchor="middle" font-size="8" fill="#e65100">(Frozen weights)</text>
    
    <!-- Feature Processing -->
    <rect x="1500" y="360" width="100" height="35" rx="3" fill="#fff8e1" stroke="#ff8f00" stroke-width="1"/>
    <text x="1550" y="375" text-anchor="middle" font-size="10" fill="#e65100">Feature Adapter</text>
    <text x="1550" y="387" text-anchor="middle" font-size="9" fill="#e65100">768→512 channels</text>
    
    <rect x="1610" y="360" width="100" height="35" rx="3" fill="#fff8e1" stroke="#ff8f00" stroke-width="1"/>
    <text x="1660" y="375" text-anchor="middle" font-size="10" fill="#e65100">Spatial Align</text>
    <text x="1660" y="387" text-anchor="middle" font-size="9" fill="#e65100">Back to original</text>
    
    <rect x="1720" y="360" width="50" height="35" rx="3" fill="#fff8e1" stroke="#ff8f00" stroke-width="1"/>
    <text x="1745" y="375" text-anchor="middle" font-size="10" fill="#e65100">Fuse</text>
    <text x="1745" y="387" text-anchor="middle" font-size="9" fill="#e65100">CNN+DINO</text>
    
    <!-- DINO3 Variants -->
    <text x="1500" y="420" font-size="12" font-weight="bold" fill="#bf360c">Available Variants:</text>
    <text x="1500" y="440" font-size="10" fill="#d84315">• dinov3_vits16: 21M (Fast)</text>
    <text x="1500" y="455" font-size="10" fill="#d84315">• dinov3_vitb16: 86M ⭐ (Balanced)</text>
    <text x="1500" y="470" font-size="10" fill="#d84315">• dinov3_vitl16: 300M (Accurate)</text>
    <text x="1500" y="485" font-size="10" fill="#d84315">• dinov3_convnext_*: ConvNeXt variants</text>
    
    <text x="1500" y="510" font-size="11" font-weight="bold" fill="#bf360c">Key Benefits:</text>
    <text x="1500" y="530" font-size="10" fill="#d84315">✓ Global attention mechanism</text>
    <text x="1500" y="545" font-size="10" fill="#d84315">✓ Transfer learning ready</text>
    <text x="1500" y="560" font-size="10" fill="#d84315">✓ Scale-aware features</text>
  </g>
  
  <!-- Multi-Scale Detection Head -->
  <rect x="50" y="590" width="1720" height="500" rx="8" fill="url(#headGrad)" stroke="#2e7d32" stroke-width="3"/>
  <text x="910" y="620" text-anchor="middle" font-size="20" font-weight="bold" fill="#1b5e20">YOLOv13 Multi-Scale Detection Head</text>
  
  <!-- Detection Branches -->
  
  <!-- P3 Branch -->
  <g id="p3-detection">
    <rect x="80" y="650" width="280" height="120" rx="5" fill="#c8e6c8" stroke="#4caf50" stroke-width="2"/>
    <text x="220" y="675" text-anchor="middle" font-size="14" font-weight="bold" fill="#2e7d32">P3 Detection Branch</text>
    <text x="220" y="695" text-anchor="middle" font-size="12" fill="#2e7d32">80×80×256 → Small Objects</text>
    
    <rect x="90" y="710" width="50" height="20" fill="#e8f5e8" stroke="#4caf50"/>
    <text x="115" y="723" text-anchor="middle" font-size="8">Conv</text>
    
    <rect x="150" y="710" width="50" height="20" fill="#e8f5e8" stroke="#4caf50"/>
    <text x="175" y="723" text-anchor="middle" font-size="8">BN</text>
    
    <rect x="210" y="710" width="50" height="20" fill="#e8f5e8" stroke="#4caf50"/>
    <text x="235" y="723" text-anchor="middle" font-size="8">Conv</text>
    
    <rect x="270" y="710" width="50" height="20" fill="#e8f5e8" stroke="#4caf50"/>
    <text x="295" y="723" text-anchor="middle" font-size="8">Detect</text>
    
    <text x="220" y="750" text-anchor="middle" font-size="10" fill="#2e7d32">Objects: 8-32 pixels</text>
    <text x="220" y="765" text-anchor="middle" font-size="9" fill="#388e3c">DINO Enhancement: Optional</text>
  </g>
  
  <!-- P4 Branch - Enhanced -->
  <g id="p4-detection">
    <rect x="380" y="650" width="300" height="120" rx="5" fill="#ffecb3" stroke="#ffa000" stroke-width="3"/>
    <text x="530" y="675" text-anchor="middle" font-size="14" font-weight="bold" fill="#e65100">P4 Detection Branch ⭐</text>
    <text x="530" y="695" text-anchor="middle" font-size="12" fill="#e65100">40×40×512 → Medium Objects (DINO Enhanced)</text>
    
    <rect x="390" y="710" width="50" height="20" fill="#fff8e1" stroke="#ff8f00"/>
    <text x="415" y="723" text-anchor="middle" font-size="8">DINO</text>
    
    <rect x="450" y="710" width="50" height="20" fill="#fff8e1" stroke="#ff8f00"/>
    <text x="475" y="723" text-anchor="middle" font-size="8">Fuse</text>
    
    <rect x="510" y="710" width="50" height="20" fill="#fff8e1" stroke="#ff8f00"/>
    <text x="535" y="723" text-anchor="middle" font-size="8">Conv</text>
    
    <rect x="570" y="710" width="50" height="20" fill="#fff8e1" stroke="#ff8f00"/>
    <text x="595" y="723" text-anchor="middle" font-size="8">Detect</text>
    
    <text x="530" y="750" text-anchor="middle" font-size="10" fill="#e65100">Objects: 32-96 pixels</text>
    <text x="530" y="765" text-anchor="middle" font-size="9" fill="#ff8f00">DINO Enhancement: Primary ⭐</text>
  </g>
  
  <!-- P5 Branch -->
  <g id="p5-detection">
    <rect x="700" y="650" width="280" height="120" rx="5" fill="#c8e6c8" stroke="#4caf50" stroke-width="2"/>
    <text x="840" y="675" text-anchor="middle" font-size="14" font-weight="bold" fill="#2e7d32">P5 Detection Branch</text>
    <text x="840" y="695" text-anchor="middle" font-size="12" fill="#2e7d32">20×20×1024 → Large Objects</text>
    
    <rect x="710" y="710" width="50" height="20" fill="#e8f5e8" stroke="#4caf50"/>
    <text x="735" y="723" text-anchor="middle" font-size="8">Conv</text>
    
    <rect x="770" y="710" width="50" height="20" fill="#e8f5e8" stroke="#4caf50"/>
    <text x="795" y="723" text-anchor="middle" font-size="8">BN</text>
    
    <rect x="830" y="710" width="50" height="20" fill="#e8f5e8" stroke="#4caf50"/>
    <text x="855" y="723" text-anchor="middle" font-size="8">Conv</text>
    
    <rect x="890" y="710" width="50" height="20" fill="#e8f5e8" stroke="#4caf50"/>
    <text x="915" y="723" text-anchor="middle" font-size="8">Detect</text>
    
    <text x="840" y="750" text-anchor="middle" font-size="10" fill="#2e7d32">Objects: 96-320 pixels</text>
    <text x="840" y="765" text-anchor="middle" font-size="9" fill="#388e3c">DINO Enhancement: Optional</text>
  </g>
  
  <!-- P6 Branch - Theoretical -->
  <g id="p6-detection">
    <rect x="1000" y="650" width="280" height="120" rx="5" fill="url(#p6Grad)" stroke="#c2185b" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="1140" y="675" text-anchor="middle" font-size="14" font-weight="bold" fill="#880e4f">P6 Detection Branch</text>
    <text x="1140" y="695" text-anchor="middle" font-size="12" fill="#880e4f">10×10×1536 → Extra Large Objects</text>
    
    <rect x="1010" y="710" width="50" height="20" fill="#f8bbd9" stroke="#c2185b"/>
    <text x="1035" y="723" text-anchor="middle" font-size="8">DINO</text>
    
    <rect x="1070" y="710" width="50" height="20" fill="#f8bbd9" stroke="#c2185b"/>
    <text x="1095" y="723" text-anchor="middle" font-size="8">Global</text>
    
    <rect x="1130" y="710" width="50" height="20" fill="#f8bbd9" stroke="#c2185b"/>
    <text x="1155" y="723" text-anchor="middle" font-size="8">Context</text>
    
    <rect x="1190" y="710" width="50" height="20" fill="#f8bbd9" stroke="#c2185b"/>
    <text x="1215" y="723" text-anchor="middle" font-size="8">Detect</text>
    
    <text x="1140" y="750" text-anchor="middle" font-size="10" fill="#880e4f">Objects: >320 pixels</text>
    <text x="1140" y="765" text-anchor="middle" font-size="9" fill="#c2185b">DINO Enhancement: Theoretical</text>
  </g>
  
  <!-- P9 Branch - Theoretical -->
  <g id="p9-detection">
    <rect x="1300" y="650" width="280" height="120" rx="5" fill="url(#p9Grad)" stroke="#7b1fa2" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="1440" y="675" text-anchor="middle" font-size="14" font-weight="bold" fill="#4a148c">P9 Global Branch</text>
    <text x="1440" y="695" text-anchor="middle" font-size="12" fill="#4a148c">1×1×2048 → Scene Understanding</text>
    
    <rect x="1310" y="710" width="50" height="20" fill="#ce93d8" stroke="#7b1fa2"/>
    <text x="1335" y="723" text-anchor="middle" font-size="8">DINO</text>
    
    <rect x="1370" y="710" width="50" height="20" fill="#ce93d8" stroke="#7b1fa2"/>
    <text x="1395" y="723" text-anchor="middle" font-size="8">Scene</text>
    
    <rect x="1430" y="710" width="50" height="20" fill="#ce93d8" stroke="#7b1fa2"/>
    <text x="1455" y="723" text-anchor="middle" font-size="8">Global</text>
    
    <rect x="1490" y="710" width="50" height="20" fill="#ce93d8" stroke="#7b1fa2"/>
    <text x="1515" y="723" text-anchor="middle" font-size="8">Context</text>
    
    <text x="1440" y="750" text-anchor="middle" font-size="10" fill="#4a148c">Global Scene Context</text>
    <text x="1440" y="765" text-anchor="middle" font-size="9" fill="#7b1fa2">DINO Enhancement: Maximum</text>
  </g>
  
  <!-- Performance Comparison -->
  <g id="performance-comparison">
    <text x="80" y="810" font-size="14" font-weight="bold" fill="#2e7d32">Performance Analysis by Feature Level:</text>
    
    <text x="80" y="835" font-size="12" font-weight="bold" fill="#ff8f00">Current Implementation:</text>
    <text x="80" y="855" font-size="11" fill="#ff8f00">• P3 Enhancement: +12-20% small objects, 94.5M params</text>
    <text x="80" y="870" font-size="11" fill="#ff8f00">• P4 Enhancement: +5-12% overall ⭐ (Primary), 99.4M params</text>
    <text x="80" y="885" font-size="11" fill="#ff8f00">• P5 Enhancement: +2-5% large objects</text>
    <text x="80" y="900" font-size="11" fill="#ff8f00">• Multi-scale (P3+P4+P5): +15-20% overall, 450.9M params</text>
    
    <text x="80" y="925" font-size="12" font-weight="bold" fill="#c2185b">Theoretical Extensions:</text>
    <text x="80" y="945" font-size="11" fill="#c2185b">• P6 Enhancement: +8-15% extra-large objects, minimal computation</text>
    <text x="80" y="960" font-size="11" fill="#7b1fa2">• P9 Enhancement: +5-10% scene understanding, global context</text>
    
    <text x="80" y="985" font-size="12" font-weight="bold" fill="#2e7d32">Why These Levels Work:</text>
    <text x="80" y="1005" font-size="11" fill="#2e7d32">✓ P4: Optimal balance of detail and context (40×40 resolution)</text>
    <text x="80" y="1020" font-size="11" fill="#2e7d32">✓ P6: Global context for large objects with low computation</text>
    <text x="80" y="1035" font-size="11" fill="#2e7d32">✓ P9: Maximum global understanding for scene-level tasks</text>
    <text x="80" y="1050" font-size="11" fill="#2e7d32">✓ DINO's transformer excels at long-range dependencies</text>
  </g>
  
  <!-- Final Detection Output -->
  <rect x="600" y="1120" width="500" height="100" rx="8" fill="#fce4ec" stroke="#c2185b" stroke-width="3"/>
  <text x="850" y="1150" text-anchor="middle" font-size="18" font-weight="bold" fill="#880e4f">Final Multi-Scale Detection</text>
  <text x="850" y="1175" text-anchor="middle" font-size="14" fill="#ad1457">Detect([P3, P4⭐, P5, P6?, P9?], num_classes)</text>
  <text x="850" y="1195" text-anchor="middle" font-size="12" fill="#ad1457">Enhanced Object Detection with Vision Transformer Features</text>
  <text x="850" y="1210" text-anchor="middle" font-size="11" fill="#ad1457">Bounding Boxes + Classes + Confidence + Global Context</text>
  
  <!-- Flow Arrows -->
  <!-- Input to backbone -->
  <line x1="200" y1="115" x2="250" y2="170" stroke="#424242" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Backbone to DINO3 -->
  <line x1="540" y1="260" x2="1480" y2="280" stroke="#ff8f00" stroke-width="4" marker-end="url(#dinoArrow)"/>
  <text x="1000" y="270" text-anchor="middle" font-size="11" fill="#e65100">512ch features to DINO3</text>
  
  <!-- DINO3 back to P4 -->
  <line x1="1480" y1="320" x2="540" y2="300" stroke="#ff8f00" stroke-width="4" stroke-dasharray="8,4" marker-end="url(#dinoArrow)"/>
  <text x="1000" y="315" text-anchor="middle" font-size="11" fill="#e65100">Enhanced features back</text>
  
  <!-- Feature levels to detection -->
  <line x1="290" y1="350" x2="220" y2="650" stroke="#4caf50" stroke-width="2" marker-end="url(#enhanceArrow)"/>
  <line x1="460" y1="350" x2="530" y2="650" stroke="#ff8f00" stroke-width="4" marker-end="url(#dinoArrow)"/>
  <line x1="630" y1="350" x2="840" y2="650" stroke="#4caf50" stroke-width="2" marker-end="url(#enhanceArrow)"/>
  <line x1="790" y1="350" x2="1140" y2="650" stroke="#c2185b" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#enhanceArrow)"/>
  <line x1="950" y1="350" x2="1440" y2="650" stroke="#7b1fa2" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#enhanceArrow)"/>
  
  <!-- Detection to output -->
  <line x1="850" y1="1090" x2="850" y2="1120" stroke="#424242" stroke-width="4" marker-end="url(#arrow)"/>
  
  <!-- Legend -->
  <rect x="50" y="1260" width="1700" height="120" rx="5" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
  <text x="900" y="1285" text-anchor="middle" font-size="16" font-weight="bold" fill="#495057">YOLOv13-DINO Architecture Legend</text>
  
  <rect x="80" y="1300" width="15" height="15" fill="#ffecb3"/>
  <text x="105" y="1312" font-size="11" fill="#495057">DINO3 Enhanced (Current)</text>
  
  <rect x="250" y="1300" width="15" height="15" fill="#f8bbd9" stroke="#c2185b" stroke-dasharray="2,2"/>
  <text x="275" y="1312" font-size="11" fill="#495057">P6 Theoretical</text>
  
  <rect x="400" y="1300" width="15" height="15" fill="#ce93d8" stroke="#7b1fa2" stroke-dasharray="2,2"/>
  <text x="425" y="1312" font-size="11" fill="#495057">P9 Theoretical</text>
  
  <rect x="550" y="1300" width="15" height="15" fill="#e8eaf6"/>
  <text x="575" y="1312" font-size="11" fill="#495057">Standard CNN</text>
  
  <rect x="680" y="1300" width="15" height="15" fill="#c8e6c8"/>
  <text x="705" y="1312" font-size="11" fill="#495057">Detection Head</text>
  
  <line x1="800" y1="1307" x2="830" y2="1307" stroke="#ff8f00" stroke-width="4"/>
  <text x="840" y="1312" font-size="11" fill="#495057">DINO Enhancement</text>
  
  <line x1="980" y1="1307" x2="1010" y2="1307" stroke="#4caf50" stroke-width="2"/>
  <text x="1020" y="1312" font-size="11" fill="#495057">Feature Flow</text>
  
  <circle cx="1150" cy="1307" r="6" fill="#ff8f00"/>
  <text x="1165" y="1312" font-size="11" fill="#495057">Extract Point</text>
  
  <text x="1300" y="1312" font-size="11" fill="#495057">⭐ = Primary Enhancement</text>
  
  <text x="80" y="1340" font-size="12" font-weight="bold" fill="#495057">Key Insights:</text>
  <text x="80" y="1360" font-size="11" fill="#495057">• P4 (40×40×512): Optimal balance of spatial detail and computational efficiency - Primary DINO integration point</text>
  <text x="80" y="1375" font-size="11" fill="#495057">• P6 (10×10×1536): Theoretical extension for extra-large objects with minimal computational overhead</text>
  <text x="900" y="1360" font-size="11" fill="#495057">• P9 (1×1×2048): Global scene understanding with maximum context integration</text>
  <text x="900" y="1375" font-size="11" fill="#495057">• Vision Transformer architecture excels at capturing long-range dependencies across all scales</text>
</svg>
